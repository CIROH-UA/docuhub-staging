<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-services/cloudservices/aws/documentation/OIDC-IAM-Integration/index" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.8.1"><title data-rh=true>Setting Up OIDC for GitHub Actions with AWS | CIROH DocuHub</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=http://ciroh.org/docuhub-staging/docs/services/cloudservices/aws/documentation/OIDC-IAM-Integration/><meta data-rh=true property=og:locale content=en><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="Setting Up OIDC for GitHub Actions with AWS | CIROH DocuHub"><meta data-rh=true name=description content="Secure GitHub Actions authentication using OpenID Connect"><meta data-rh=true property=og:description content="Secure GitHub Actions authentication using OpenID Connect"><link data-rh=true rel=icon href=/docuhub-staging/img/logos/docuhub.png><link data-rh=true rel=canonical href=http://ciroh.org/docuhub-staging/docs/services/cloudservices/aws/documentation/OIDC-IAM-Integration/><link data-rh=true rel=alternate href=http://ciroh.org/docuhub-staging/docs/services/cloudservices/aws/documentation/OIDC-IAM-Integration/ hreflang=en><link data-rh=true rel=alternate href=http://ciroh.org/docuhub-staging/docs/services/cloudservices/aws/documentation/OIDC-IAM-Integration/ hreflang=x-default><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"http://ciroh.org/docuhub-staging/docs/services/cloudservices/","name":"Public Cloud","position":1},{"@type":"ListItem","item":"http://ciroh.org/docuhub-staging/docs/services/cloudservices/aws/","name":"CIROH AWS Account","position":2},{"@type":"ListItem","item":"http://ciroh.org/docuhub-staging/docs/services/cloudservices/aws/documentation/","name":"Documentation and Tutorial","position":3},{"@type":"ListItem","item":"http://ciroh.org/docuhub-staging/docs/services/cloudservices/aws/documentation/OIDC-IAM-Integration/","name":"Setting Up OIDC for GitHub Actions with AWS","position":4}]}</script><link rel=preconnect href=https://www.google-analytics.com><link rel=preconnect href=https://www.googletagmanager.com><script async src="https://www.googletagmanager.com/gtag/js?id=G-7KD31X6H62"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-7KD31X6H62",{anonymize_ip:!0})</script><script src=https://cdn.jsdelivr.net/npm/docusaurus-plugin-drawio/viewer.min.js></script><link rel=alternate type=application/rss+xml href=/docuhub-staging/blog/rss.xml title="CIROH DocuHub RSS Feed"><link rel=alternate type=application/atom+xml href=/docuhub-staging/blog/atom.xml title="CIROH DocuHub Atom Feed"><link rel=alternate type=application/rss+xml href=/docuhub-staging/release-notes/rss.xml title="CIROH DocuHub RSS Feed"><link rel=alternate type=application/atom+xml href=/docuhub-staging/release-notes/atom.xml title="CIROH DocuHub Atom Feed"><link rel=stylesheet href=/docuhub-staging/assets/css/styles.21de081a.css><script src=/docuhub-staging/assets/js/runtime~main.2a55cb7a.js defer></script><script src=/docuhub-staging/assets/js/main.515bfe2b.js defer></script><body class=navigation-with-keyboard><svg xmlns=http://www.w3.org/2000/svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="dark",e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/docuhub-staging/><div class=navbar__logo><img src=/docuhub-staging/img/logos/docuhub.png alt="CIROH Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src=/docuhub-staging/img/logos/docuhub.png alt="CIROH Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">DocuHub</b></a><a class="navbar__item navbar__link" href=/docuhub-staging/docs/products/intro>Products</a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/docuhub-staging/docs/services/intro>Services</a><a class="navbar__item navbar__link" href=/docuhub-staging/docs/policies/intro>Policies</a><a href=https://portal.ciroh.org/ target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">CIROH Portal<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a class="navbar__item navbar__link" href=/docuhub-staging/impact>Community Impact</a><a class="navbar__item navbar__link" href=/docuhub-staging/blog>Blog</a><a class="navbar__item navbar__link" href=/docuhub-staging/news>News</a><a class="navbar__item navbar__link" href=/docuhub-staging/release-notes>Release Notes</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_Bca1><div class=navbar__search><span aria-label="expand searchbar" role=button class=search-icon tabindex=0></span><input id=search_input_react type=search placeholder=Loading... aria-label=Search class="navbar__search-input search-bar" disabled></div></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docuhub-staging/docs/services/intro>CIROH CyberInfrastructure</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docuhub-staging/docs/services/access>Infrastructure Access</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" href=/docuhub-staging/docs/services/cloudservices/>Public Cloud</a><button aria-label="Collapse sidebar category 'Public Cloud'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" tabindex=0 href=/docuhub-staging/docs/services/cloudservices/aws/>CIROH AWS Account</a><button aria-label="Collapse sidebar category 'CIROH AWS Account'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docuhub-staging/docs/services/cloudservices/aws/officehours>CIROH AWS Office Hours</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" tabindex=0 href=/docuhub-staging/docs/services/cloudservices/aws/documentation/>Documentation and Tutorial</a><button aria-label="Collapse sidebar category 'Documentation and Tutorial'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/docuhub-staging/docs/services/cloudservices/aws/documentation/aws-best-practice/>AWS Best Practices</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/docuhub-staging/docs/services/cloudservices/aws/documentation/OIDC-IAM-Integration/>Setting Up OIDC for GitHub Actions with AWS</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/docuhub-staging/docs/services/cloudservices/aws/documentation/tagging/>Tag Resources on AWS</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/docuhub-staging/docs/services/cloudservices/aws/documentation/data-science-tools/>AWS Data Science Tools</a></ul></ul><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docuhub-staging/docs/services/cloudservices/google-cloud/>CIROH Google Account</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docuhub-staging/docs/services/cloudservices/2i2c/>CIROH JupyterHub</a><button aria-label="Expand sidebar category 'CIROH JupyterHub'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docuhub-staging/docs/services/cloudservices/HydroShare/>HydroShare</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docuhub-staging/docs/services/cloudservices/cuahsi/>CUAHSI JupyterHub</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docuhub-staging/docs/services/cloudservices/cloudserviceblogs>Cloud Services Blogs</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docuhub-staging/docs/services/on-prem/>On-Premises</a><button aria-label="Expand sidebar category 'On-Premises'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docuhub-staging/docs/services/external-resources/>External Resources</a><button aria-label="Expand sidebar category 'External Resources'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docuhub-staging/docs/services/subdomain>CIROH Subdomain Request Form</a></ul></nav><button type=button title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width=20 height=20 aria-hidden=true class=collapseSidebarButtonIcon_kv0_><g fill=#7a7a7a><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"/><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"/></g></svg></button></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/docuhub-staging/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/docuhub-staging/docs/services/cloudservices/><span>Public Cloud</span></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/docuhub-staging/docs/services/cloudservices/aws/><span>CIROH AWS Account</span></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/docuhub-staging/docs/services/cloudservices/aws/documentation/><span>Documentation and Tutorial</span></a><li class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link>Setting Up OIDC for GitHub Actions with AWS</span></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Setting Up OIDC for GitHub Actions with AWS</h1></header><p>OpenID Connect (OIDC) allows GitHub Actions to authenticate with AWS without storing long-lived credentials. This guide walks through setting up OIDC authentication for your GitHub Actions workflows.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=benefits-of-oidc>Benefits of OIDC<a href=#benefits-of-oidc class=hash-link aria-label="Direct link to Benefits of OIDC" title="Direct link to Benefits of OIDC">​</a></h2>
<ul>
<li><strong>No long-lived credentials</strong>: Eliminates the need to store AWS access keys in GitHub secrets</li>
<li><strong>Automatic credential rotation</strong>: Temporary credentials are generated for each workflow run</li>
<li><strong>Enhanced security</strong>: Fine-grained control over which repositories can access AWS resources</li>
<li><strong>Audit trail</strong>: Clear CloudTrail logs showing which workflows assumed roles</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=step-1-create-the-oidc-identity-provider>Step 1: Create the OIDC Identity Provider<a href=#step-1-create-the-oidc-identity-provider class=hash-link aria-label="Direct link to Step 1: Create the OIDC Identity Provider" title="Direct link to Step 1: Create the OIDC Identity Provider">​</a></h2>
<p>Navigate to IAM and select Identity Providers to add a new OpenID Connect provider. Enter the GitHub Actions token URL (<code>https://token.actions.githubusercontent.com</code>) as the provider URL and specify <code>sts.amazonaws.com</code> as the audience. This establishes the trust relationship between AWS and GitHub Actions for secure authentication.</p>
<p align=center><img src=/docuhub-staging/img/oidc-create-provider.png alt="Creating OIDC Identity Provider" style=width:80%;height:80%></p>
<p>After creating the identity provider, you'll see it listed in your IAM console with the provider URL <code>token.actions.githubusercontent.com</code>. The provider details show the ARN, creation time, and configured audience (<code>sts.amazonaws.com</code>) that will be used for authentication.</p>
<p align=center><img src=/docuhub-staging/img/oidc-provider-details.png alt="OIDC Provider Details" style=width:80%;height:80%></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=step-2-create-iam-role-with-custom-trust-policy>Step 2: Create IAM Role with Custom Trust Policy<a href=#step-2-create-iam-role-with-custom-trust-policy class=hash-link aria-label="Direct link to Step 2: Create IAM Role with Custom Trust Policy" title="Direct link to Step 2: Create IAM Role with Custom Trust Policy">​</a></h2>
<p>When creating a new IAM role, select "Custom trust policy" as the trusted entity type. The trust policy defines the conditions under which GitHub Actions can assume this role, including the Federated principal (your OIDC provider ARN) and the repository filter using StringLike condition.</p>
<p align=center><img src=/docuhub-staging/img/oidc-custom-trust-policy.png alt="Creating IAM Role with Custom Trust Policy" style=width:80%;height:80%></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=custom-trust-policy>Custom Trust Policy<a href=#custom-trust-policy class=hash-link aria-label="Direct link to Custom Trust Policy" title="Direct link to Custom Trust Policy">​</a></h3>
<p>Replace <code>ACCOUNT_ID</code> with your AWS account ID and <code>ORG_NAME/REPO_NAME</code> with your GitHub organization and repository name:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-json codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token property">"Version"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"2012-10-17"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token property">"Statement"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">            </span><span class="token property">"Effect"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"Allow"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">            </span><span class="token property">"Principal"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">                </span><span class="token property">"Federated"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"arn:aws:iam::ACCOUNT_ID:oidc-provider/token.actions.githubusercontent.com"</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">            </span><span class="token property">"Action"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"sts:AssumeRoleWithWebIdentity"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">            </span><span class="token property">"Condition"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">                </span><span class="token property">"StringEquals"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">                    </span><span class="token property">"token.actions.githubusercontent.com:aud"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"sts.amazonaws.com"</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">                </span><span class="token property">"StringLike"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">                    </span><span class="token property">"token.actions.githubusercontent.com:sub"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"repo:ORG_NAME/REPO_NAME:*"</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=step-3-create-permissions-policy>Step 3: Create Permissions Policy<a href=#step-3-create-permissions-policy class=hash-link aria-label="Direct link to Step 3: Create Permissions Policy" title="Direct link to Step 3: Create Permissions Policy">​</a></h2>
<p>Create a custom IAM policy that defines the specific AWS permissions your GitHub Actions workflow needs. This policy includes permissions for Terraform state management (S3, DynamoDB), infrastructure deployment (Lambda, Step Functions, EC2), and resource monitoring (CloudWatch Logs).</p>
<p align=center><img src=/docuhub-staging/img/oidc-permissions-policy.png alt="Creating Permissions Policy" style=width:80%;height:80%></p>
<p>The JSON policy editor allows you to specify granular permissions for each AWS service your workflow will interact with. Refer to your infrastructure requirements to determine the necessary permissions.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=step-4-attach-policy-to-role>Step 4: Attach Policy to Role<a href=#step-4-attach-policy-to-role class=hash-link aria-label="Direct link to Step 4: Attach Policy to Role" title="Direct link to Step 4: Attach Policy to Role">​</a></h2>
<p>In the role creation wizard, search for and select your custom policy (e.g., <code>GitHubActions-NgenDatastream-Policy</code>) to attach it to the role. This step links the permissions you defined earlier with the trust relationship configured in the trust policy.</p>
<p align=center><img src=/docuhub-staging/img/oidc-attach-policy.png alt="Attaching Policy to Role" style=width:80%;height:80%></p>
<p>Multiple policies can be attached to a single role if your workflow requires permissions from different policy documents.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=step-5-name-and-create-the-role>Step 5: Name and Create the Role<a href=#step-5-name-and-create-the-role class=hash-link aria-label="Direct link to Step 5: Name and Create the Role" title="Direct link to Step 5: Name and Create the Role">​</a></h2>
<p>Provide a descriptive name for your IAM role (e.g., <code>github-actions-ngen-datastream-role</code>) and review the complete trust policy configuration. The trust policy shows the OIDC provider ARN, the required audience (<code>sts.amazonaws.com</code>), and the repository condition that restricts access to your specific GitHub repository.</p>
<p align=center><img src=/docuhub-staging/img/oidc-name-role.png alt="Naming and Creating the Role" style=width:80%;height:80%></p>
<p>After verification, create the role to finalize the OIDC setup.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=step-6-add-role-arn-to-github-secrets>Step 6: Add Role ARN to GitHub Secrets<a href=#step-6-add-role-arn-to-github-secrets class=hash-link aria-label="Direct link to Step 6: Add Role ARN to GitHub Secrets" title="Direct link to Step 6: Add Role ARN to GitHub Secrets">​</a></h2>
<p>In your GitHub repository settings, navigate to <strong>Settings</strong> → <strong>Secrets and variables</strong> → <strong>Actions</strong> and add a new repository secret. Create a secret named <code>AWS_ROLE_ARN</code> with the complete ARN of the IAM role you just created.</p>
<p align=center><img src=/docuhub-staging/img/oidc-github-secret.png alt="Adding Role ARN to GitHub Secrets" style=width:80%;height:80%></p>
<p>This secret will be referenced in your workflow file to authenticate with AWS using OIDC instead of long-lived access keys.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=step-7-use-oidc-in-your-workflow>Step 7: Use OIDC in Your Workflow<a href=#step-7-use-oidc-in-your-workflow class=hash-link aria-label="Direct link to Step 7: Use OIDC in Your Workflow" title="Direct link to Step 7: Use OIDC in Your Workflow">​</a></h2>
<p>Add the following step to your GitHub Actions workflow to authenticate with AWS using OIDC:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Configure AWS Credentials (OIDC)</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">  </span><span class="token key atrule">uses</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> aws</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">actions/configure</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">aws</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">credentials@v4</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">  </span><span class="token key atrule">with</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token key atrule">role-to-assume</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> secrets.AWS_ROLE_ARN </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token key atrule">aws-region</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> env.AWS_REGION </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token key atrule">role-session-name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> GitHubActions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">TerraformCheck</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=how-it-works>How It Works<a href=#how-it-works class=hash-link aria-label="Direct link to How It Works" title="Direct link to How It Works">​</a></h3>
<p><strong>Initiates OIDC Authentication</strong></p>
<p>This step uses the official AWS GitHub Action to authenticate with AWS using OpenID Connect instead of traditional access keys. GitHub automatically generates a short-lived JSON Web Token (JWT) that contains information about your workflow, repository, and branch.</p>
<p><strong>Assumes the IAM Role</strong></p>
<p>The action sends the JWT to AWS STS (Security Token Service) and requests to assume the IAM role specified in <code>role-to-assume</code>. AWS validates the token against your OIDC provider's trust policy, checking that the request comes from your authorized repository.</p>
<p><strong>Provides Temporary Credentials</strong></p>
<p>Once validated, AWS returns temporary security credentials (access key, secret key, and session token) that are valid for the duration of the workflow job. These credentials are automatically configured in the GitHub Actions environment, making them available to all subsequent steps that use the AWS CLI or SDKs.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=key-parameters>Key Parameters<a href=#key-parameters class=hash-link aria-label="Direct link to Key Parameters" title="Direct link to Key Parameters">​</a></h3>
<ul>
<li><strong><code>role-to-assume</code></strong>: The ARN of your IAM role stored as a GitHub secret</li>
<li><strong><code>aws-region</code></strong>: The AWS region for the session</li>
<li><strong><code>role-session-name</code></strong>: A descriptive identifier for CloudTrail logging and auditing (helps you track which job assumed the role)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=required-workflow-permissions>Required Workflow Permissions<a href=#required-workflow-permissions class=hash-link aria-label="Direct link to Required Workflow Permissions" title="Direct link to Required Workflow Permissions">​</a></h2>
<p>Ensure your workflow job has the necessary permissions to request OIDC tokens:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token key atrule">permissions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">  </span><span class="token key atrule">id-token</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> write</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">  </span><span class="token key atrule">contents</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> read</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=complete-workflow-example>Complete Workflow Example<a href=#complete-workflow-example class=hash-link aria-label="Direct link to Complete Workflow Example" title="Direct link to Complete Workflow Example">​</a></h2>
<p>Here's a complete example of a GitHub Actions workflow using OIDC authentication:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Deploy Infrastructure</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token key atrule">on</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">  </span><span class="token key atrule">workflow_dispatch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token key atrule">env</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">  </span><span class="token key atrule">AWS_REGION</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> us</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">east</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token number">2</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token key atrule">jobs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">  </span><span class="token key atrule">deploy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token key atrule">runs-on</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">latest</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token key atrule">permissions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">      </span><span class="token key atrule">id-token</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> write</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">      </span><span class="token key atrule">contents</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> read</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token key atrule">steps</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Checkout code</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">        </span><span class="token key atrule">uses</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> actions/checkout@v4</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">      </span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Configure AWS Credentials (OIDC)</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">        </span><span class="token key atrule">uses</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> aws</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">actions/configure</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">aws</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">credentials@v4</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">        </span><span class="token key atrule">with</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">          </span><span class="token key atrule">role-to-assume</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> secrets.AWS_ROLE_ARN </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">          </span><span class="token key atrule">aws-region</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> env.AWS_REGION </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">          </span><span class="token key atrule">role-session-name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> GitHubActions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">Deploy</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">      </span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Verify AWS Identity</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">        </span><span class="token key atrule">run</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> aws sts get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">caller</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">identity</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=security-best-practices>Security Best Practices<a href=#security-best-practices class=hash-link aria-label="Direct link to Security Best Practices" title="Direct link to Security Best Practices">​</a></h2>
<ol>
<li><strong>Limit repository access</strong>: Use specific repository names in the trust policy rather than wildcards</li>
<li><strong>Use least privilege</strong>: Only grant the permissions your workflow actually needs</li>
<li><strong>Set session names</strong>: Use descriptive <code>role-session-name</code> values for better audit trails</li>
<li><strong>Monitor role usage</strong>: Regularly review CloudTrail logs to detect unauthorized access attempts</li>
<li><strong>Rotate OIDC thumbprints</strong>: Keep the OIDC provider thumbprints updated if GitHub rotates their signing keys</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=troubleshooting>Troubleshooting<a href=#troubleshooting class=hash-link aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting">​</a></h2>
<p><strong>Error: "Not authorized to perform sts<!-- -->:AssumeRoleWithWebIdentity<!-- -->"</strong></p>
<ul>
<li>Verify the trust policy includes your correct repository name</li>
<li>Ensure the OIDC provider ARN matches in both the trust policy and your AWS account</li>
</ul>
<p><strong>Error: "Token audience validation failed"</strong></p>
<ul>
<li>Check that the audience in the trust policy is exactly <code>sts.amazonaws.com</code></li>
<li>Verify the OIDC provider configuration has the correct audience</li>
</ul>
<p><strong>Permissions denied during workflow execution</strong></p>
<ul>
<li>Review the IAM policy attached to the role and ensure it includes all necessary permissions</li>
<li>Check for resource-specific ARN restrictions that might be blocking access</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class=col><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class=tag_QGVx><a rel=tag class="tag_zVej tagRegular_sFm0" href=/docuhub-staging/docs/tags/ciroh>CIROH</a><li class=tag_QGVx><a rel=tag class="tag_zVej tagRegular_sFm0" href=/docuhub-staging/docs/tags/git-hub-actions>GitHub Actions</a><li class=tag_QGVx><a rel=tag class="tag_zVej tagRegular_sFm0" href=/docuhub-staging/docs/tags/aws>AWS</a><li class=tag_QGVx><a rel=tag class="tag_zVej tagRegular_sFm0" href=/docuhub-staging/docs/tags/oidc>OIDC</a><li class=tag_QGVx><a rel=tag class="tag_zVej tagRegular_sFm0" href=/docuhub-staging/docs/tags/security>Security</a><li class=tag_QGVx><a rel=tag class="tag_zVej tagRegular_sFm0" href=/docuhub-staging/docs/tags/ci-cd>CI/CD</a></ul></div></div><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class=col><a href=https://github.com/CIROH-UA/ciroh-ua_website/edit/main/docs/services/cloudservices/aws/documentation/OIDC-IAM-Integration/index.mdx target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/docuhub-staging/docs/services/cloudservices/aws/documentation/aws-best-practice/><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>AWS Best Practices</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/docuhub-staging/docs/services/cloudservices/aws/documentation/tagging/><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Tag Resources on AWS</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#benefits-of-oidc class="table-of-contents__link toc-highlight">Benefits of OIDC</a><li><a href=#step-1-create-the-oidc-identity-provider class="table-of-contents__link toc-highlight">Step 1: Create the OIDC Identity Provider</a><li><a href=#step-2-create-iam-role-with-custom-trust-policy class="table-of-contents__link toc-highlight">Step 2: Create IAM Role with Custom Trust Policy</a><ul><li><a href=#custom-trust-policy class="table-of-contents__link toc-highlight">Custom Trust Policy</a></ul><li><a href=#step-3-create-permissions-policy class="table-of-contents__link toc-highlight">Step 3: Create Permissions Policy</a><li><a href=#step-4-attach-policy-to-role class="table-of-contents__link toc-highlight">Step 4: Attach Policy to Role</a><li><a href=#step-5-name-and-create-the-role class="table-of-contents__link toc-highlight">Step 5: Name and Create the Role</a><li><a href=#step-6-add-role-arn-to-github-secrets class="table-of-contents__link toc-highlight">Step 6: Add Role ARN to GitHub Secrets</a><li><a href=#step-7-use-oidc-in-your-workflow class="table-of-contents__link toc-highlight">Step 7: Use OIDC in Your Workflow</a><ul><li><a href=#how-it-works class="table-of-contents__link toc-highlight">How It Works</a><li><a href=#key-parameters class="table-of-contents__link toc-highlight">Key Parameters</a></ul><li><a href=#required-workflow-permissions class="table-of-contents__link toc-highlight">Required Workflow Permissions</a><li><a href=#complete-workflow-example class="table-of-contents__link toc-highlight">Complete Workflow Example</a><li><a href=#security-best-practices class="table-of-contents__link toc-highlight">Security Best Practices</a><li><a href=#troubleshooting class="table-of-contents__link toc-highlight">Troubleshooting</a></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Quick Links</div><ul class="footer__items clean-list"><li class=footer__item><a href=http://portal.ciroh.org/ target=_blank rel="noopener noreferrer" class=footer__link-item>CIROH Portal<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a class=footer__link-item href=/docuhub-staging/contact>Contact Us</a><li class=footer__item><a class=footer__link-item href=/docuhub-staging/docs/contribute>Contribute</a><li class=footer__item><a href=https://forms.office.com/r/5ww7qRWwwf target=_blank rel="noopener noreferrer" class=footer__link-item>Feedback<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>About CIROH</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://ciroh.ua.edu/about/ target=_blank rel="noopener noreferrer" class=footer__link-item>About Us<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://ciroh.ua.edu/about/ciroh-partners/ target=_blank rel="noopener noreferrer" class=footer__link-item>Members & Partners<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://ciroh.ua.edu/contact-us/ target=_blank rel="noopener noreferrer" class=footer__link-item>Contact CIROH<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://github.com/CIROH-UA/ciroh-ua_website target=_blank rel="noopener noreferrer" class=footer__link-item>DocuHub Repository<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Follow us on</div><ul class="footer__items clean-list"><li class=footer__item>
                  <div class=footer-social-links>
                    <a href=https://github.com/CIROH-UA target=_blank rel="noreferrer noopener" aria-label="Visit CIROH">
                      <img src=/docuhub-staging/img/socials/github_light.svg alt="CIROH on GitHub" width=40 height=40>
                    </a>
                    <a href=https://www.linkedin.com/company/uaciroh/ target=_blank rel="noreferrer noopener" aria-label="CIROH on LinkedIn">
                      <img src=/docuhub-staging/img/socials/linkedin_light.svg alt="CIROH on LinkedIn" width=40 height=40>
                    </a>
                    <a href=https://www.youtube.com/@UA_CIROH target=_blank rel="noreferrer noopener" aria-label="CIROH on YouTube">
                      <img src=/docuhub-staging/img/socials/youtube_light.svg alt="CIROH on YouTube" width=40 height=40>
                    </a>
                  </div>
                <li class=footer__item>
                <div class=footer-social-links> 
                  <a href=https://www.instagram.com/ua_ciroh/ target=_blank rel="noreferrer noopener" aria-label="CIROH on Instagram">
                    <img src=/docuhub-staging/img/socials/instagram_light.svg alt="CIROH on Instagram" width=40 height=40>
                  </a>       
                  <a href=https://www.facebook.com/UACIROH/ target=_blank rel="noreferrer noopener" aria-label="CIROH on Facebook">
                    <img src=/docuhub-staging/img/socials/facebook_light.svg alt="CIROH on Facebook" width=40 height=40>
                  </a>              
                  <a href=https://twitter.com/UA_CIROH target=_blank rel="noreferrer noopener" aria-label="CIROH on X (Twitter)">
                    <img src=/docuhub-staging/img/socials/x_light.svg alt="CIROH on X (Twitter)" width=40 height=40>
                  </a>
                </div>
                </ul></div></div><div class="footer__bottom text--center"><div class=footer__copyright>
          <div class=footer__attrib>
            Developed with ❤️ by DocuHub Team at CIROH
          </div>
          <div class=footer__funding>
            This research was supported by the Cooperative Institute for Research to Operations in Hydrology
            (CIROH) with funding under award NA22NWS4320003 from the NOAA Cooperative Institute Program.
            The statements, findings, conclusions, and recommendations are those of the author(s) and do not
            necessarily reflect the opinions of NOAA.
          </div>
          <div class=footer__bottom>
            Copyright © 2025 CIROH - The University of Alabama
          </div>
          </div></div></div></footer></div>